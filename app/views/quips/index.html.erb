<h1>All quips</h1>

<%= link_to 'New Quip', new_quip_path %> 
<br><br>

<table>
	<tr>
		<th>Id</th>
		<th>Original Author</th>
		<!-- <th>Text</th> -->
		<th>Most Recent Author</th>
		<th>Most Recent Text</th>
		<th>Branch</th>
		<th>Offensive</th>
		<th></th>
	</tr>

	<% @quips.each do |quip| %>
	<% @latest_diff = @diffs.where("quip_id = ?", quip.id).last %>
		<tr>
			<td><%= quip.id %></td>
			<td><%= quip.author %></td>
			
			<% if @latest_diff %>
				<td><%= @latest_diff.author %></td>
				<td><%= @latest_diff.text %></td>
				<td><%= @latest_diff.branch %></td>
				<td><%= @latest_diff.offensive %></td>
			<% else %>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			<% end %>
			
			
			<td><%= link_to 'Show', quip_path(quip) %></td>
			<td><%= link_to 'Destroy', quip_path(quip),
					method: :delete,
					data: { confirm: 'Are you sure?' } %></td>
		</tr>
	<% end %>
</table>
